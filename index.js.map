{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet galleryBox;\nlet isGalleryBox = false;\n\nexport function createGallery(images) {\n  const gallery = document.querySelector(\".gallery\");\n\n  let galleryArr = [];\n\n  images.forEach(\n    ({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    }) => {\n      const item = document.createElement(\"li\");\n      item.classList.add(\"gallery-item\");\n\n      const link = document.createElement(\"a\");\n      item.classList.add(\"gallery-item-link\");\n      link.setAttribute(\"href\", largeImageURL);\n      item.append(link);\n\n      const image = document.createElement(\"img\");\n      image.setAttribute(\"src\", webformatURL);\n      image.setAttribute(\"alt\", tags);\n      link.append(image);\n\n      const description = document.createElement(\"ul\");\n      description.classList.add(\"description\");\n      const descriptionSettings = [\"Likes\", \"Vievs\", \"Comments\", \"Downloads\"];\n      for (let i = 0; i < 4; i++) {\n        const descriptionItem = document.createElement(\"li\");\n        const descriptionState = document.createElement(\"p\");\n        descriptionState.classList.add(\"description-state\");\n        descriptionState.textContent = descriptionSettings[i];\n        const descriptionValue = document.createElement(\"p\");\n        descriptionValue.classList.add(\"description-value\");\n        if (i === 0) {\n          descriptionValue.textContent = likes;\n        } else if (i === 1) {\n          descriptionValue.textContent = views;\n        } else if (i === 2) {\n          descriptionValue.textContent = comments;\n        } else if (i === 3) {\n          descriptionValue.textContent = downloads;\n        }\n        descriptionItem.append(descriptionState);\n        descriptionItem.append(descriptionValue);\n        description.append(descriptionItem);\n      }\n      item.append(description);\n\n      galleryArr.push(item);\n    }\n  );\n\n  gallery.append(...galleryArr);\n\n  if (isGalleryBox) {\n    galleryBox.refresh();\n  } else {\n    const settings = {\n      captionsData: \"alt\",\n      captionDelay: 250,\n    };\n    galleryBox = new SimpleLightbox(\".gallery li a\", settings);\n    isGalleryBox = true;\n  }\n}\n\nexport function clearGallery() {\n  const items = document.querySelectorAll(\".gallery-item\");\n  if (items.length != 0) {\n    items.forEach((elem) => elem.remove());\n  }\n}\n\nexport function showLoader() {\n  const loading = document.querySelector(\".loader\");\n  loading.classList.toggle(\"visible\");\n}\n\nexport function hideLoader() {\n  const loading = document.querySelector(\".loader\");\n  loading.classList.toggle(\"visible\");\n}\n\nexport function showLoadMoreButton() {\n  const btnMore = document.querySelector(\".btn-more\");\n  if (!btnMore.classList.contains(\"viseble\")) {\n    btnMore.classList.add(\"viseble\");\n  }\n}\n\nexport function hideLoadMoreButton() {\n  const btnMore = document.querySelector(\".btn-more\");\n  btnMore.classList.remove(\"viseble\");\n}\n","import axios from \"axios\";\n\nexport default async function getImagesByQuery(query, page) {\n  const searchParams = new URLSearchParams({\n    key: \"53656110-41a2fc396959a6e939ebdf929\",\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  });\n\n  try {\n    const answer = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n    return {\n      images: answer.data.hits,\n      total: answer.data.total,\n    };\n  } catch (error) {\n    console.log(error);\n  }\n}\n","\"use strict\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport * as galleryMethods from \"./js/render-functions\";\nimport getImagesByQuery from \"./js/pixabay-api\";\n\nlet pageCounter = 1;\nlet searchWords;\nlet totaPage;\nconst pageView = document.querySelector(\".page-counter\");\n\nconst btnMore = document.querySelector(\".btn-more\");\nbtnMore.addEventListener(\"click\", loadMore);\n\nconst form = document.querySelector(\".form\");\nform.addEventListener(\"submit\", startSearch);\n\nfunction startSearch(event) {\n  event.preventDefault();\n  pageCounter = 1;\n  searchWords = event.target.elements.word.value.trim();\n  if (searchWords != \"\") {\n    galleryMethods.showLoader();\n\n    getImagesByQuery(searchWords, pageCounter).then((value) => {\n      galleryMethods.hideLoader();\n      if (value.images.length === 0) {\n        pageView.classList.remove(\"visible\");\n        galleryMethods.clearGallery();\n        galleryMethods.hideLoadMoreButton();\n        iziToast.warning({\n          message:\n            \"Sorry, there are no images matching your search query. Please try again!\",\n          messageColor: \"#fff\",\n          backgroundColor: \"red\",\n          theme: \"dark\",\n          position: \"center\",\n        });\n      } else {\n        totaPage = Math.ceil(value.total / 15);\n        galleryMethods.clearGallery();\n        galleryMethods.createGallery(value.images);\n\n        if (pageCounter < totaPage) {\n          galleryMethods.showLoadMoreButton();\n          pageView.classList.add(\"visible\");\n          pageView.textContent = `1 --- ${totaPage}`;\n        } else {\n          iziToast.info({\n            message:\n              \"We`re sorry, but you`ve reached the end of search results.\",\n            messageColor: \"#fff\",\n            backgroundColor: \"green\",\n            theme: \"dark\",\n            position: \"topRight\",\n          });\n          pageView.classList.remove(\"visible\");\n          galleryMethods.hideLoadMoreButton();\n        }\n      }\n    });\n    form.reset();\n  } else {\n    iziToast.warning({\n      message: \"Enter word for search...\",\n      messageColor: \"#fff\",\n      backgroundColor: \"red\",\n      theme: \"dark\",\n      position: \"topRight\",\n    });\n    pageView.classList.remove(\"visible\");\n  }\n}\n\nfunction loadMore() {\n  pageCounter += 1;\n  const scrolH = window.innerHeight;\n  getImagesByQuery(searchWords, pageCounter).then((value) => {\n    galleryMethods.createGallery(value.images);\n    window.scrollBy({\n      top: scrolH,\n      left: 0,\n      behavior: \"smooth\",\n    });\n    pageView.textContent = `1 --- ${pageCounter} --- ${totaPage}`;\n  });\n\n  if (pageCounter === totaPage) {\n    galleryMethods.hideLoadMoreButton();\n    pageView.textContent = `1 --- ${pageCounter}`;\n    iziToast.info({\n      message: \"We`re sorry, but you`ve reached the end of search results.\",\n      messageColor: \"#fff\",\n      backgroundColor: \"green\",\n      theme: \"dark\",\n      position: \"topRight\",\n    });\n  }\n}\n"],"names":["galleryBox","isGalleryBox","createGallery","images","gallery","galleryArr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","item","link","image","description","descriptionSettings","descriptionItem","descriptionState","descriptionValue","settings","SimpleLightbox","clearGallery","items","elem","showLoader","hideLoader","showLoadMoreButton","btnMore","hideLoadMoreButton","getImagesByQuery","query","page","searchParams","answer","axios","error","pageCounter","searchWords","totaPage","pageView","loadMore","form","startSearch","event","galleryMethods.showLoader","value","galleryMethods.hideLoader","galleryMethods.clearGallery","galleryMethods.hideLoadMoreButton","iziToast","galleryMethods.createGallery","galleryMethods.showLoadMoreButton","scrolH"],"mappings":"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"}